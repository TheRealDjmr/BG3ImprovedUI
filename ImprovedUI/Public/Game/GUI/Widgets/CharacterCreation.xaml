<ls:UIWidget x:Name="CharacterCreation"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ls="clr-namespace:ls;assembly=SharedGUI"
    xmlns:System="clr-namespace:System;assembly=mscorlib"
    xmlns:noesis="clr-namespace:NoesisGUIExtensions;assembly=Noesis.GUI.Extensions"
    xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
    
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    mc:Ignorable="d"
    d:DesignHeight="2160" d:DesignWidth="3840"
    ls:UIWidget.ContextName="CharacterCreation">

    <ls:UIWidget.Resources>
        <ResourceDictionary>

            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Library/CharacterCreationLib_k.xaml"/>
                <ResourceDictionary Source="../Library/OptionTemplates.xaml"/>
            </ResourceDictionary.MergedDictionaries>

            <ResourceDictionary x:Key="BottomBoxesResources">
                <System:Double x:Key="MaxWrapPanelWidth">2100</System:Double>
            </ResourceDictionary>

            <ControlTemplate x:Key="InviteButtonTemplate">
                <ls:LSButton Command="{Binding DataContext.InvitePlayer, RelativeSource={RelativeSource AncestorType={x:Type ls:UIWidget}}}" SoundID="UI_HUD_Shared_Invite">
                    <ls:LSButton.ToolTip>
                        <ls:LSTooltip Content="{Binding Source='h5bacb1e0geecag4473g9aa1g3f3ed207377e',Converter={StaticResource TranslatedStringConverter}, ConverterParameter='ToUpper'}"/>
                    </ls:LSButton.ToolTip>
                    <ls:LSButton.Template>
                        <ControlTemplate TargetType="ls:LSButton">
                            <Image x:Name="img" Source="pack://application:,,,/GustavNoesisGUI;component/Assets/Buttons/frame_addToParty_d.png" Stretch="None"/>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Source" Value="pack://application:,,,/GustavNoesisGUI;component/Assets/Buttons/frame_addToParty_h.png" TargetName="img"/>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter Property="Source" Value="pack://application:,,,/GustavNoesisGUI;component/Assets/Buttons/frame_addToParty_p.png" TargetName="img"/>
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Source" Value="pack://application:,,,/GustavNoesisGUI;component/Assets/Buttons/frame_addToParty_disabled.png" TargetName="img"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </ls:LSButton.Template>
                </ls:LSButton>
            </ControlTemplate>
            
            <ControlTemplate x:Key="MultiplayerPanelTemplate">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">

                    <ItemsControl ItemsSource="{Binding Data.Players}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Horizontal"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Grid x:Name="root">
                                    <Border Background="Black" Height="114" Width="114" />
                                    <Border Background="{Binding CommunityIcon}" Height="110" Width="110">
                                        <Border.ToolTip>
                                            <ls:LSTooltip Content="{Binding DataContext.Name , RelativeSource={RelativeSource Mode=TemplatedParent}}"/>
                                        </Border.ToolTip>
                                    </Border>
                                    <Image x:Name="frame" Source="pack://application:,,,/GustavNoesisGUI;component/Assets/Buttons/frame_profile_d.png" Stretch="None" IsHitTestVisible="False"/>
                                    <Image Visibility="{Binding Ready, Converter={StaticResource BoolToVisibleConverter}}" Source="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_confirm.png" Stretch="None" HorizontalAlignment="Right" VerticalAlignment="Top"/>
                                    <Control Template="{DynamicResource KickButton}" VerticalAlignment="Bottom" Margin="0 0 0 -30" />
                                </Grid>
                                <DataTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="frame" Property="Source" Value="pack://application:,,,/GustavNoesisGUI;component/Assets/Buttons/frame_profile_h.png"/>
                                    </Trigger>
                                </DataTemplate.Triggers>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>

                    <StackPanel x:Name="invites" Orientation="Horizontal" Margin="-10,0,0,0">
                        <ContentControl x:Name="invite0" Visibility="Collapsed" Template="{StaticResource InviteButtonTemplate}"/>
                        <ContentControl x:Name="invite1" Visibility="Collapsed" Template="{StaticResource InviteButtonTemplate}"/>
                        <ContentControl x:Name="invite2" Visibility="Collapsed" Template="{StaticResource InviteButtonTemplate}"/>
                    </StackPanel>
                </StackPanel>

                <ControlTemplate.Triggers>
                    <DataTrigger Binding="{Binding IsHost}" Value="False">
                        <Setter Property="Visibility" Value="Hidden"/>
                        <Setter TargetName="invites" Property="Visibility" Value="Hidden"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding DataContext.Data.LobbyVisibility, RelativeSource={RelativeSource AncestorType={x:Type ls:UIWidget}}}" Value="Offline">
                        <Setter Property="Visibility" Value="Hidden"/>
                        <Setter TargetName="invites" Property="Visibility" Value="Hidden"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Data.Players.Count}" Value="1">
                        <Setter TargetName="invite0" Property="Visibility" Value="Visible"/>
                        <Setter TargetName="invite1" Property="Visibility" Value="Visible"/>
                        <Setter TargetName="invite2" Property="Visibility" Value="Visible"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Data.Players.Count}" Value="2">
                        <Setter Property="Visibility" Value="Visible"/>
                        <Setter TargetName="invite0" Property="Visibility" Value="Visible"/>
                        <Setter TargetName="invite1" Property="Visibility" Value="Visible"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Data.Players.Count}" Value="3">
                        <Setter Property="Visibility" Value="Visible"/>
                        <Setter TargetName="invite0" Property="Visibility" Value="Visible"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Data.Players.Count}" Value="4">
                        <Setter Property="Visibility" Value="Visible"/>
                    </DataTrigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>

            <DataTemplate x:Key="AppearanceOptionTitle">
                <ContentControl Margin="0,40,0,0" Width="200"
                                Content="{Binding Text, Converter={StaticResource StringToUpperConverter}}"
                                Template="{StaticResource FloralFlairTitleTemplate}"
                                FontSize="{DynamicResource BigFontSize}"/>
            </DataTemplate>

            <DataTemplate x:Key="AppearanceOptionTemplate">
                <Grid Margin="0,4,0,4" Width="750">
                    <TextBlock VerticalAlignment="Center" HorizontalAlignment="Left" Margin="80,0,0,0"
                               Text="{Binding Text}"
                               x:Name="OptionText"
                               FontSize="{DynamicResource MediumFontSize}"
                               Foreground="{DynamicResource LS_TertiaryColor}"/>
                    <Control x:Name="content"
                                    VerticalAlignment="Center" HorizontalAlignment="Left" Margin="0,0,0,0"
                                    Template="{StaticResource ComboBoxTemplate}"/>
                </Grid>
                <DataTemplate.Triggers>
                    <DataTrigger Binding="{Binding ListItemType}" Value="ComboBox">
                        <Setter Property="Template" Value="{StaticResource ComboBoxTemplate}" TargetName="content"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding ListItemType}" Value="TickBox">
                        <Setter Property="Template" Value="{StaticResource TickBoxTemplate}" TargetName="content"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding ListItemType}" Value="Slider">
                        <Setter Property="Template" Value="{StaticResource SliderTemplate}" TargetName="content"/>
                        <Setter Property="Margin" Value="0,60,0,0" TargetName="content"/>
                        <Setter Property="VerticalAlignment" Value="Top" TargetName="content"/>
                        <Setter Property="HorizontalAlignment" Value="center" TargetName="content"/>
                        <Setter Property="Margin" Value="0,20,0,0" TargetName="OptionText"/>
                        <Setter Property="HorizontalAlignment" Value="center" TargetName="OptionText"/>
                        <Setter Property="VerticalAlignment" Value="Top" TargetName="OptionText"/>
                    </DataTrigger>
                </DataTemplate.Triggers>
            </DataTemplate>

            <Style x:Key="AppearanceOptionStyle" TargetType="ListBoxItem" BasedOn="{StaticResource {x:Type ListBoxItem}}">
                <Setter Property="ContentTemplate" Value="{StaticResource AppearanceOptionTemplate}" />
                <Setter Property="HorizontalAlignment" Value="Left"/>
                <Setter Property="VerticalAlignment" Value="Top"/>
                <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Disabled"/>
                <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
                <Setter Property="IsSelected" Value="False"/>
                <Setter Property="BorderBrush" Value="Transparent"/>
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Padding" Value="0"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="IsSelected" Value="True"/>
                        <Setter Property="BorderBrush" Value="Transparent" />
                        <Setter Property="Background" Value="Transparent" />
                    </Trigger>
                    <Trigger Property="IsSelected" Value="True">
                        <Setter Property="BorderBrush" Value="Transparent" />
                        <Setter Property="Background" Value="Transparent" />
                    </Trigger>
                </Style.Triggers>
            </Style>
			
			<!-- MOD START - New Appearance template/style for makeup -->
            <Style BasedOn="{StaticResource {x:Type ListBoxItem}}" TargetType="ListBoxItem" x:Key="ModdedAppearanceOptionStyle">
                <Setter Property="ContentTemplate" Value="{StaticResource AppearanceOptionTemplate}"/>
                <Setter Property="HorizontalAlignment" Value="Left"/>
                <Setter Property="VerticalAlignment" Value="Top"/>
                <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Disabled"/>
                <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
                <Setter Property="IsSelected" Value="False"/>
                <Setter Property="BorderBrush" Value="Transparent"/>
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Padding" Value="0"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="IsSelected" Value="True"/>
                        <Setter Property="BorderBrush" Value="Transparent"/>
                        <Setter Property="Background" Value="Transparent"/>
                    </Trigger>
                    <Trigger Property="IsSelected" Value="True">
                        <Setter Property="BorderBrush" Value="Transparent"/>
                        <Setter Property="Background" Value="Transparent"/>
                    </Trigger>
					<DataTrigger Binding="{Binding ListItemType}" Value="TickBox">
                        <Setter Property="Visibility" Value="Hidden"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
			<!-- MOD END -->

            <Style x:Key="ColorCellItemStyle" TargetType="FrameworkElement">
                <Setter Property="Margin" Value="0,0,5,5"/>
            </Style>


            <DataTemplate DataType="{x:Type ls:VMColorSwatch}">
                <Grid Background="{Binding Color}" ToolTipService.Placement="Left" Width="58" Height="58" >
                    <b:Interaction.Triggers>
                        <b:EventTrigger EventName="MouseLeftButtonUp">
                            <b:InvokeCommandAction Command="{Binding (ls:AttachedProperties.InheritedTag),RelativeSource={RelativeSource Mode=TemplatedParent}}" CommandParameter="{Binding}" />
                        </b:EventTrigger>
                    </b:Interaction.Triggers>
                    <Grid.ToolTip>
                        <ls:LSTooltip Content="{Binding DataContext.ColorName, RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource TranslatedStringConverter}, ConverterParameter='LocaKey'}"/>
                    </Grid.ToolTip>
                    <Image Source="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/palette_shine.png"/>
                    <Image x:Name="SelectedImg" Visibility="Hidden" Source="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/palette_selected.png"/>
                </Grid>
                <DataTemplate.Triggers>
                    <DataTrigger Binding="{Binding Selected}" Value="True">
                        <Setter TargetName="SelectedImg" Property="Visibility" Value="Visible"/>
                    </DataTrigger>
                </DataTemplate.Triggers>
            </DataTemplate>
            <ControlTemplate x:Key="ColorCellTemplate">
                <Grid>
                    <Image Source="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/palette_shine.png"/>
                    <Image x:Name="SelectedImg" Visibility="Hidden" Source="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/palette_selected.png"/>

                </Grid>
                <ControlTemplate.Triggers>
                    <DataTrigger Binding="{Binding Selected}" Value="True">
                        <Setter TargetName="SelectedImg" Property="Visibility" Value="Visible"/>
                    </DataTrigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>

            <ControlTemplate x:Key="CCSkinColorGrid">
                <ItemsControl ItemsSource="{Binding }" Width="{DynamicResource ColorGridWidth}" ls:AttachedProperties.InheritedTag="{Binding DataContext.SetSkinColor, RelativeSource={RelativeSource AncestorType={x:Type ls:UIWidget}}}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel Margin="0,20,0,20" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </ControlTemplate>

            <ControlTemplate x:Key="CCEyeColorGrid">
                <ItemsControl ItemsSource="{Binding }" ls:AttachedProperties.InheritedTag="{Binding DataContext.SetEyeColor, RelativeSource={RelativeSource AncestorType={x:Type ls:UIWidget}}}"  Width="{DynamicResource ColorGridWidth}" ItemContainerStyle="{StaticResource ColorCellItemStyle}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel Margin="0,20,0,20" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </ControlTemplate>

            <ControlTemplate x:Key="CCHairColorGrid">
                <ItemsControl ItemsSource="{Binding }" ls:AttachedProperties.InheritedTag="{Binding DataContext.SetHairColor, RelativeSource={RelativeSource AncestorType={x:Type ls:UIWidget}}}"  Width="{DynamicResource ColorGridWidth}" ItemContainerStyle="{StaticResource ColorCellItemStyle}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel Margin="0,20,0,20" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </ControlTemplate>

            <ControlTemplate x:Key="CCColorGrid">
                <ItemsControl ItemsSource="{Binding ColorSwatch}" ls:AttachedProperties.InheritedTag="{Binding DataContext.SetColor, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}}" Width="{DynamicResource ColorGridWidth}" ItemContainerStyle="{StaticResource ColorCellItemStyle}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel Margin="0,20,0,20" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </ControlTemplate>

            <ControlTemplate x:Key="CharacterCreationStepButtons" TargetType="Control">
                <ControlTemplate.Resources>
                    <Style TargetType="Image" BasedOn="{StaticResource StepButtonFiller}"/>
                </ControlTemplate.Resources>
                <StackPanel Orientation="Horizontal" DataContext="{Binding DataContext, RelativeSource={RelativeSource AncestorType={x:Type ls:UIWidget}}}">
                    <ls:LSRadioButton x:Name="originBtn" Template="{DynamicResource StepButton}" Command="{Binding SetCharacterCreationStep}" CommandParameter="Origin" SoundID="UI_HUD_CC_Origin" Content="{Binding Source='hd0d4922ag7581g43eag9142g44e22c131fa8', Converter={StaticResource TranslatedStringConverter}}" Margin="0,0,-16,0">
                        <ls:LSRadioButton.Resources>
                            <BitmapImage x:Key="Icon" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_origin.png"/>
                        </ls:LSRadioButton.Resources>
                    </ls:LSRadioButton>
                    <Image />
                    <ls:LSRadioButton x:Name="raceBtn" Template="{DynamicResource StepButton}" Command="{Binding SetCharacterCreationStep}" CommandParameter="Race" SoundID="UI_HUD_CC_Race" Content="{Binding Source='hadf27237ge191g4922ga84cg055b984c9b1f', Converter={StaticResource TranslatedStringConverter}}" Margin="-16,0,-16,0">
                        <ls:LSRadioButton.Resources>
                            <BitmapImage x:Key="Icon" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_race.png"/>
                        </ls:LSRadioButton.Resources>
                    </ls:LSRadioButton>
                    <Image />
                    <ls:LSRadioButton x:Name="appearanceBtn" Template="{DynamicResource StepButton}" Command="{Binding SetCharacterCreationStep}" CommandParameter="Appearance" SoundID="UI_HUD_CC_Appearance" Content="{Binding Source='h261cce55g1d1eg4c09g9675ge5c1be13e820', Converter={StaticResource TranslatedStringConverter}}" Margin="-16,0,-16,0">
                        <ls:LSRadioButton.Resources>
                            <BitmapImage x:Key="Icon" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_appearance.png"/>
                        </ls:LSRadioButton.Resources>
                    </ls:LSRadioButton>
                    <Image />
                    <ls:LSRadioButton x:Name="classBtn" Template="{DynamicResource StepButton}" Command="{Binding SetCharacterCreationStep}" CommandParameter="Class" SoundID="UI_HUD_CC_Class" Content="{Binding Source='h4d0d00cfg4edeg42c3gaa4agcc3908351b8d', Converter={StaticResource TranslatedStringConverter}}" Margin="-16,0,-16,0">
                        <ls:LSRadioButton.Resources>
                            <BitmapImage x:Key="Icon" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_class.png"/>
                        </ls:LSRadioButton.Resources>
                    </ls:LSRadioButton>
                    <Image />
                    <ls:LSRadioButton x:Name="skillsBtn" Template="{DynamicResource StepButton}" Command="{Binding SetCharacterCreationStep}" CommandParameter="Skills" SoundID="UI_HUD_CC_Skills" Content="{Binding Source='h12abe296ga0fbg44feg9451gb10a0bf92acb', Converter={StaticResource TranslatedStringConverter}}" Margin="-16,0,-16,0">
                        <ls:LSRadioButton.Resources>
                            <BitmapImage x:Key="Icon" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_skills.png"/>
                        </ls:LSRadioButton.Resources>
                    </ls:LSRadioButton>
                    <Image />
                    <ls:LSRadioButton x:Name="abilitiesBtn" Template="{DynamicResource StepButton}" Command="{Binding SetCharacterCreationStep}" CommandParameter="Abilities" SoundID="UI_HUD_CC_Abilities" Content="{Binding Source='h3a6a5b07g266eg4391ga17bg9975ccbe59c4', Converter={StaticResource TranslatedStringConverter}}" Margin="-16,0,-16,0">
                        <ls:LSRadioButton.Resources>
                            <BitmapImage x:Key="Icon" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_abilities.png"/>
                        </ls:LSRadioButton.Resources>
                    </ls:LSRadioButton>

                    <Image/>

                    <StackPanel Orientation="Horizontal" Margin="-16,26,0,0">
                        <Grid Margin="0,0,-16,0">
                            <ls:LSButton x:Name="prevBtn" Command="{Binding PrevCharacterCreationStep}" SoundID="UI_HUD_CC_Accept" Template="{DynamicResource NavButton}">
                                <ls:LSButton.Resources>
                                    <BitmapImage x:Key="Icon" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_browse_d_left.png"/>
                                    <BitmapImage x:Key="IconHighlight" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_browse_d_left.png"/>
                                </ls:LSButton.Resources>
                            </ls:LSButton>
                        </Grid>
                        <Image Style="{StaticResource StepButtonFiller}" Margin="0,-16,0,16"/>
                        <ls:LSButton x:Name="nextBtn" SoundID="UI_HUD_CC_Accept" Template="{DynamicResource NavButton}" Margin="-16,0,0,0" Command="{Binding NextCharacterCreationStep}">
                            <ls:LSButton.Resources>
                                <BitmapImage x:Key="Icon" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_browse_d_right.png"/>
                                <BitmapImage x:Key="IconHighlight" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_browse_d_right.png"/>
                            </ls:LSButton.Resources>
                        </ls:LSButton>

                    </StackPanel>

                </StackPanel>

                <ControlTemplate.Triggers>
                    <DataTrigger Binding="{Binding CharacterCreationStep}" Value="Finish">
                        <Setter TargetName="nextBtn" Property="IsEnabled" Value="False"/>
                    </DataTrigger>
                    
                    <DataTrigger Binding="{Binding CharacterCreationStep}" Value="Origin">
                        <Setter TargetName="originBtn" Property="IsChecked" Value="True"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding CharacterCreationStep}" Value="Race">
                        <Setter TargetName="raceBtn" Property="IsChecked" Value="True"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding CharacterCreationStep}" Value="Appearance">
                        <Setter TargetName="appearanceBtn" Property="IsChecked" Value="True"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding CharacterCreationStep}" Value="Class">
                        <Setter TargetName="classBtn" Property="IsChecked" Value="True"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding CharacterCreationStep}" Value="Skills">
                        <Setter TargetName="skillsBtn" Property="IsChecked" Value="True"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding CharacterCreationStep}" Value="Abilities">
                        <Setter TargetName="abilitiesBtn" Property="IsChecked" Value="True"/>
                    </DataTrigger>

                    <DataTrigger Binding="{Binding OriginInvalid}" Value="True">
                        <Setter TargetName="originBtn" Property="Tag" Value="True"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding BackgroundInvalid}" Value="True">
                        <Setter TargetName="originBtn" Property="Tag" Value="True"/>
                    </DataTrigger>

                    <DataTrigger Binding="{Binding RaceAbilityInvalid}" Value="True">
                        <Setter TargetName="raceBtn" Property="Tag" Value="True"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding RaceProgressionDetails.IsInvalid}" Value="True">
                        <Setter TargetName="raceBtn" Property="Tag" Value="True"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding RacePassiveInvalid}" Value="True">
                        <Setter TargetName="raceBtn" Property="Tag" Value="True"/>
                    </DataTrigger>

                    <DataTrigger Binding="{Binding VoiceInvalid}" Value="True">
                        <Setter TargetName="appearanceBtn" Property="Tag" Value="True"/>
                    </DataTrigger>

                    <DataTrigger Binding="{Binding ClassInvalid}" Value="True">
                        <Setter TargetName="classBtn" Property="Tag" Value="True"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding ClassProgressionDetails.IsInvalid}" Value="True">
                        <Setter TargetName="classBtn" Property="Tag" Value="True"/>
                    </DataTrigger>                    
                    <DataTrigger Binding="{Binding ClassAbilityInvalid}" Value="True">
                        <Setter TargetName="classBtn" Property="Tag" Value="True"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding ClassPassiveInvalid}" Value="True">
                        <Setter TargetName="classBtn" Property="Tag" Value="True"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding GodInvalid}" Value="True">
                        <Setter TargetName="classBtn" Property="Tag" Value="True"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding SpellPrepare.IsInvalid}" Value="True">
                        <Setter TargetName="classBtn" Property="Tag" Value="True"/>
                    </DataTrigger>

                    <DataTrigger Binding="{Binding SkillsInvalid}" Value="True">
                        <Setter TargetName="skillsBtn" Property="Tag" Value="True"/>
                    </DataTrigger>

                    <DataTrigger Binding="{Binding AbilitiesInvalid}" Value="True">
                        <Setter TargetName="abilitiesBtn" Property="Tag" Value="True"/>
                    </DataTrigger>

                    <DataTrigger Binding="{Binding CharacterCreationStep}" Value="Companion">
                        <Setter Property="Visibility" Value="Collapsed"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding CharacterCreationStep}" Value="Finish">
                        <Setter Property="Visibility" Value="Collapsed"/>
                    </DataTrigger>

                </ControlTemplate.Triggers>
            </ControlTemplate>

            <ControlTemplate x:Key="CommonCharacterCreationPanel">
                <ls:LSScrollViewer x:Name="scroller" Template="{DynamicResource ScrollViewerTemplate}" VerticalScrollBarVisibility="Visible" Width="1100" Padding="{TemplateBinding Padding}" Margin="100,0,0,0">
                    <ls:LSScrollViewer.Resources>
                        <GridLength x:Key="Top">200</GridLength>
                        <GridLength x:Key="Bottom">200</GridLength>
                    </ls:LSScrollViewer.Resources>

                    <ContentPresenter MaxWidth="1100" Margin="0,20,0,0"/>

                </ls:LSScrollViewer>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="scroller" Property="ScrollWheelEnabled" Value="True"/>
                    </Trigger>
                    <Trigger Property="IsMouseOver" Value="False">
                        <Setter TargetName="scroller" Property="ScrollWheelEnabled" Value="False"/>
                    </Trigger>                    
                </ControlTemplate.Triggers>
            </ControlTemplate>

            <ControlTemplate x:Key="GenderTemplate">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <StackPanel.Resources>
                        <Style TargetType="ls:LSRadioButton" BasedOn="{StaticResource {x:Type RadioButton}}">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ls:LSRadioButton">
                                        <Grid>
                                            <DockPanel Width="104">
                                                <Image DockPanel.Dock="Left" x:Name="img01" Source="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/selection_default_d_01.png" Stretch="None"/>
                                                <Image DockPanel.Dock="Right" x:Name="img05" Source="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/selection_default_d_05.png" Stretch="None"/>
                                                <Grid x:Name="g02">
                                                    <Grid.Background>
                                                        <ImageBrush ImageSource="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/selection_default_d_02.png" Stretch="Fill" TileMode="Tile"/>
                                                    </Grid.Background>
                                                </Grid>
                                            </DockPanel>
                                            <Image x:Name="icon" Source="{DynamicResource Icon}" Stretch="None"/>
                                        </Grid>

                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="img01" Property="Source" Value="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/selection_default_h_01.png"/>
                                                <Setter TargetName="img05" Property="Source" Value="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/selection_default_h_05.png"/>
                                                <Setter TargetName="g02" Property="Background">
                                                    <Setter.Value>
                                                        <ImageBrush ImageSource="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/selection_default_h_02.png" Stretch="Fill" TileMode="Tile"/>
                                                    </Setter.Value>
                                                </Setter>
                                                <Setter TargetName="icon" Property="Source" Value="{DynamicResource Icon_Hover}"/>
                                            </Trigger>
                                            <Trigger Property="IsChecked" Value="True">
                                                <Setter TargetName="img01" Property="Source" Value="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/selection_active_d_01.png"/>
                                                <Setter TargetName="img05" Property="Source" Value="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/selection_active_d_05.png"/>
                                                <Setter TargetName="g02" Property="Background">
                                                    <Setter.Value>
                                                        <ImageBrush ImageSource="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/selection_active_d_02.png" Stretch="Fill" TileMode="Tile"/>
                                                    </Setter.Value>
                                                </Setter>
                                            </Trigger>
                                            <MultiTrigger>
                                                <MultiTrigger.Conditions>
                                                    <Condition Property="IsChecked" Value="True"/>
                                                    <Condition Property="IsMouseOver" Value="True"/>
                                                </MultiTrigger.Conditions>
                                                <MultiTrigger.Setters>
                                                    <Setter TargetName="img01" Property="Source" Value="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/selection_active_h_01.png"/>
                                                    <Setter TargetName="img05" Property="Source" Value="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/selection_active_h_05.png"/>
                                                    <Setter TargetName="g02" Property="Background">
                                                        <Setter.Value>
                                                            <ImageBrush ImageSource="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/selection_active_h_02.png" Stretch="Fill" TileMode="Tile"/>
                                                        </Setter.Value>
                                                    </Setter>
                                                </MultiTrigger.Setters>
                                            </MultiTrigger>
                                        </ControlTemplate.Triggers>

                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </StackPanel.Resources>
                    <ls:LSRadioButton x:Name="FemaleButton" Command="{Binding SetGender}" CommandParameter="Female" SoundID="UI_HUD_CC_Gender">
                        <ls:LSRadioButton.Resources>
                            <BitmapImage x:Key="Icon" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_female_d.png"/>
                            <BitmapImage x:Key="Icon_Hover" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_female_h.png"/>
                        </ls:LSRadioButton.Resources>
                    </ls:LSRadioButton>
                    <ls:LSRadioButton x:Name="MaleButton" Command="{Binding SetGender}" CommandParameter="Male" SoundID="UI_HUD_CC_Gender">
                        <ls:LSRadioButton.Resources>
                            <BitmapImage x:Key="Icon" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_male_d.png"/>
                            <BitmapImage x:Key="Icon_Hover" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_male_h.png"/>
                        </ls:LSRadioButton.Resources>
                    </ls:LSRadioButton>
                </StackPanel>
                <ControlTemplate.Triggers>
                    <DataTrigger Binding="{Binding Gender}" Value="Male">
                        <Setter Property="IsChecked" Value="True" TargetName="MaleButton"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Gender}" Value="Female">
                        <Setter Property="IsChecked" Value="True" TargetName="FemaleButton"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding CanEditGender}" Value="False">
                        <Setter Property="IsEnabled" Value="False"/>
                    </DataTrigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>

            <Style x:Key="PlayOriginStoryButtonStyle" TargetType="{x:Type ls:LSButton}">
                <Setter Property="Template" Value="{DynamicResource CarouselButtonTemplate}"/>
                <Style.Resources>
                    <ImageSource x:Key="ButtonNormal">pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_play_d.png</ImageSource>
                    <ImageSource x:Key="ButtonHighlight">pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_play_h.png</ImageSource>
                    <ImageSource x:Key="ButtonPressed">pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_play_h.png</ImageSource>
                    <ImageSource x:Key="ButtonDisabled">pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_play_d.png</ImageSource>
                </Style.Resources>
            </Style>

            <ControlTemplate x:Key="OriginStoryTemplate">
                <Grid>
                    <Image Source="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ornate_buttonFrame.png" Stretch="None"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <ls:LSButton Opacity="0.5" IsEnabled="False" Style="{StaticResource PlayOriginStoryButtonStyle}" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="0,0,0,0"
                                             Command="{Binding DataContext.PlayOriginStory, RelativeSource={RelativeSource AncestorType={x:Type ls:UIWidget}}}" SoundID="UI_HUD_CC_ListenOrigin"/>
                        <TextBlock Text="{Binding Source='h777d8a87gfd85g4997gbf2cg14d91c759e2c', Converter={StaticResource TranslatedStringConverter}}" VerticalAlignment="Center" Foreground="{DynamicResource LS_PrimaryColor}" FontSize="{DynamicResource MediumFontSize}" Margin="20,0,0,0"/>
                    </StackPanel>
                </Grid>
            </ControlTemplate>

            <ControlTemplate x:Key="OriginCharacterCreationTemplate">
                <ContentControl Template="{StaticResource CommonCharacterCreationPanel}" Margin="-100,0,100,0" Padding="34,0,0,0">
                    <StackPanel>
                        <TextBlock Text="{Binding Source='h4e22c88bg6071g4c6dg81fdg68133ee0804d', Converter={StaticResource TranslatedStringConverter}}" Style="{DynamicResource PanelTitleText}" Margin="0,0,0,0"/>
                        <ContentControl Template="{StaticResource GenderTemplate}" HorizontalAlignment="Center"/>

                        <ContentControl Template="{StaticResource BoxedItemSelection}" DataContext="{Binding OriginCharacters}" Margin="0,32,0,0" Resources="{StaticResource SideBoxesTripleResources}">
                            <ContentControl.Style>
                                <Style TargetType="ContentControl">
                                    <Style.Resources>
                                        <System:String x:Key="SoundEventHover">UI_HUD_CC_SelectOrigin_Hover</System:String>
                                        <System:String x:Key="SoundEventPress">UI_HUD_CC_SelectOrigin_Press</System:String>
                                    </Style.Resources>
                                </Style>
                            </ContentControl.Style>
                        </ContentControl>

                        <StackPanel HorizontalAlignment="Center" Visibility="{Binding CanEditName, Converter={StaticResource BoolToVisibleConverter}}">
                            <TextBlock Text="{Binding Source='h3492f9f8g2946g40a5g8cc1g0af620c2a6bb', Converter={StaticResource TranslatedStringConverter}}" Style="{DynamicResource PanelTitleText}" Margin="0,32,0,0"/>

                            <TextBlock Text="{Binding DummyCharacter.Stats.OriginDescription}" Style="{StaticResource PanelTitleInfoText}" Margin="0,8,0,0"/>

                            <TextBlock Text="{Binding Source='heb7ccc73g0dcfg4a78g95efgd76c4bdb4c03', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelHeaderText}" Margin="0,32,0,0"/>
                            <Grid Margin="0,16,0,0" HorizontalAlignment="Center">
                                <Image Source="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/frame_textInput.png" Stretch="None"/>
                                <ls:LSTextBox Text="{Binding CharacterName}" IsEnabled="{Binding CanEditName}" MaxLength="20" TextImmediateSourceUpdate="True" Foreground="{DynamicResource LS_PrimaryColor}" FontSize="{DynamicResource DefaultFontSize}" TextAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Center" Margin="70,0,50,0"/>
                            </Grid>

                            <TextBlock Text="{Binding Source='h1d2631e2g78fdg4de2gadceg1a724c2f7d9b', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelHeaderText}" Margin="0,100,0,0"/>
                            <Control Template="{DynamicResource Carousel}" Margin="0,20,0,0" DataContext="{Binding Backgrounds}"/>
                            <TextBlock Text="{Binding DummyCharacter.Stats.BackgroundDescription}" Style="{StaticResource PanelInfoText}" Margin="0,32,0,0"/>
                        </StackPanel>

                            <StackPanel HorizontalAlignment="Center" Visibility="{Binding CanEditName, Converter={StaticResource BoolToCollapsedConverter}}">
                                <TextBlock Text="{Binding OriginCharacters.SelectedItem.Name}" Style="{DynamicResource PanelTitleText}" FontSize="{DynamicResource GiganticFontSize}" Margin="0,32,0,0"/>
                                <TextBlock Text="{Binding DummyCharacter.Stats.OriginDescription}" Style="{StaticResource PanelTitleInfoText}" Margin="0,8,0,0"/>
                                <ContentControl Template="{StaticResource OriginStoryTemplate}" Margin="0,20,0,0"/>
                            </StackPanel>

                        <Control Template="{StaticResource CharacterBackgroundFeatures}" Visibility="{Binding BackgroundFeatures.Count, Converter={StaticResource CountToVisibilityConverter}}"/>
                    </StackPanel>
                </ContentControl>
            </ControlTemplate>

            <ControlTemplate x:Key="RaceCharacterCreationTemplate">
                <ContentControl Template="{StaticResource CommonCharacterCreationPanel}" Padding="34,0,0,0">
                    <StackPanel Margin="0,0,0,100">

                        <TextBlock Text="{Binding Source='h6020727bge0e3g4de7gaf3ag469c3b32b3d2', Converter={StaticResource TranslatedStringConverter}}" Style="{DynamicResource PanelTitleText}"/>
						<!-- MOD START - Gender section moved -->
                        <ContentControl HorizontalAlignment="Center" Margin="0,0,0,32" Template="{StaticResource GenderTemplate}"/>
                        <!-- MOD END -->
                        <ContentControl Template="{StaticResource BoxedItemSelection}" DataContext="{Binding Races}" Resources="{StaticResource SideBoxesTripleResources}">
                            <ContentControl.Style>
                                <Style TargetType="ContentControl">
                                    <Style.Resources>
                                        <System:String x:Key="SoundEventHover">UI_HUD_CC_SelectRace_Hover</System:String>
                                        <System:String x:Key="SoundEventPress">UI_HUD_CC_SelectRace_Press</System:String>
                                    </Style.Resources>
                                </Style>
                            </ContentControl.Style>
                        </ContentControl>
                        <!-- MOD START - Gender section original location -->
                        <!--<ContentControl Template="{StaticResource GenderTemplate}" HorizontalAlignment="Right" Margin="0,-108,108,0"/>-->
                        <!-- MOD END -->

                        <StackPanel Visibility="{Binding Subraces.ComboItems.Count, Converter={StaticResource CountToVisibilityConverter}}" Margin="0,32,0,0">
                            <TextBlock Text="{Binding Source='h29d1d637g94bbg4f11g9bdfgbe0042b60e40', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelHeaderText}"/>
                            <Control Template="{DynamicResource Carousel}" Margin="0,20,0,0" DataContext="{Binding Subraces}"/>
                        </StackPanel>

                        <TextBlock Text="{Binding DummyCharacter.Stats.RaceDescription}" Style="{StaticResource PanelTitleInfoText}" Margin="0,32,0,0"/>

                        <Control Template="{StaticResource SpellBoxesTemplate}" DataContext="{Binding RaceProgressionDetails}"/>

                        <ContentControl Template="{StaticResource ValidationFailedHighlighter}" Tag="{Binding RacePassiveInvalid}" Visibility="{Binding RacePassives.Count, Converter={StaticResource CountToVisibilityConverter}}" Margin="0,30,0,30">
                            <ItemsControl ItemsSource="{Binding RacePassives}" >
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel HorizontalAlignment="Center" Margin="0,24,0,0">
                                            <TextBlock Style="{StaticResource PanelHeaderText}">
                                                <Run Text="{Binding Name}"/>
                                                <Run Text="{Binding SelectedPassiveCount, StringFormat=' ({0}'}"/>
                                                <Run Text="{Binding MaxSelectedPassiveCount, StringFormat='/{0})'}"/>
                                            </TextBlock>
                                            <ContentControl Template="{StaticResource SelectPassives}" DataContext="{Binding Passives}"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ContentControl>

                        <ContentControl Margin="0,32,0,0" Template="{StaticResource CharacterRaceFeatures}" Visibility="{Binding RaceProgressionDetails.IsEmpty, Converter={StaticResource BoolToHiddenConverter}}"/>

                    </StackPanel>
                </ContentControl>
            </ControlTemplate>

            <ControlTemplate x:Key="AppearanceTemplate">
                <ControlTemplate.Resources>
                    <System:Double x:Key="ColorGridWidth">760</System:Double>
                </ControlTemplate.Resources>
                <StackPanel Margin="0,0,0,200">
                    <StackPanel.Resources>
                        <Style TargetType="Border">
                            <Setter Property="BorderBrush" Value="{DynamicResource LS_TertiaryColor}"/>
                            <Setter Property="BorderThickness" Value="2"/>
                            <Setter Property="Height" Value="200"/>
                            <Setter Property="Margin" Value="0,20,0,0"/>
                        </Style>
                        <Style TargetType="Image">
                            <Setter Property="Margin" Value="0,20,0,0"/>
                        </Style>
                    </StackPanel.Resources>
                    <TextBlock Text="{Binding Source='h261cce55g1d1eg4c09g9675ge5c1be13e820', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelTitleText}"/>

                    <!-- MOD START - Margin change -->
                    <ContentControl HorizontalAlignment="Center" Margin="-12,0,0,0" Template="{StaticResource GenderTemplate}"/>
                    <!-- MOD END -->

                    <!-- Voice -->
                    <TextBlock Text="{Binding Source='h81102ec7gef4dg42edg85b5g60d7fb1d13f9', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelHeaderText}" HorizontalAlignment="Center"/>
                    <ContentControl Template="{StaticResource ValidationFailedHighlighter}" Tag="{Binding VoiceInvalid}" Margin="0,20,0,0">
                        <Control Template="{DynamicResource Carousel}" DataContext="{Binding Voices}"/>
                    </ContentControl>
                    <Grid>
                        <Image Source="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ornate_buttonFrame.png" Stretch="None" Margin="0"/>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                            <ls:LSButton Style="{StaticResource PlayOriginStoryButtonStyle}" HorizontalAlignment="Left" VerticalAlignment="Center"
                                            Command="{Binding DataContext.PlayVoice, RelativeSource={RelativeSource AncestorType={x:Type ls:UIWidget}}}" SoundID="UI_HUD_CC_ListenVoice"/>
                            <TextBlock Text="{Binding Source='hbf7b56f9g7cd9g4b08g9986ge231edbbde18', Converter={StaticResource TranslatedStringConverter}}" VerticalAlignment="Center" Foreground="{DynamicResource LS_PrimaryColor}" FontSize="{DynamicResource MediumFontSize}" Margin="20,0,0,0"/>
                        </StackPanel>
                    </Grid>

                    <!-- Face -->
                    <TextBlock Text="{Binding Source='h800369a8g9201g4e9dg88a0g37f311fbcd18', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelHeaderText}"/>
                    <Control Template="{DynamicResource Carousel}" Margin="0,20,0,0" DataContext="{Binding AppearanceFaces}"/>

                    <!-- Horns -->
                    <StackPanel Visibility="{Binding AppearanceHorns.ComboItems.Count, Converter={StaticResource CountToVisibilityConverter}}">
                        <TextBlock Text="{Binding Source='h290f2542g9702g4651g8afdgdae1f08a12eb', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelHeaderText}"/>
                        <Control Template="{DynamicResource Carousel}" Margin="0,20,0,0" DataContext="{Binding AppearanceHorns}" />
                    </StackPanel>

                    <!-- Skin -->
                    <TextBlock Text="{Binding Source='hc81ba7bcgb2ccg4423ga050g253fd53ce2c9', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelHeaderText}"/>
                    <ListBox ItemsSource="{Binding SkinColorOptions}" ItemContainerStyle="{StaticResource AppearanceOptionStyle}" HorizontalAlignment="Center">
                        <ListBox.Template>
                            <ControlTemplate >
                                <ItemsPresenter/>
                            </ControlTemplate>
                        </ListBox.Template>
                    </ListBox>
                    <ItemsControl DataContext="{Binding SkinColors}" Template="{StaticResource CCSkinColorGrid}" HorizontalAlignment="Center"/>

                    <!-- Eye -->
                    <TextBlock Text="{Binding Source='h1203122ag1146g4759ga531g57ccd5ef36da', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelHeaderText}"/>
                    <ListBox ItemsSource="{Binding EyeColorOptions}" ItemContainerStyle="{StaticResource AppearanceOptionStyle}" HorizontalAlignment="Center">
                        <ListBox.Template>
                            <ControlTemplate >
                                <ItemsPresenter/>
                            </ControlTemplate>
                        </ListBox.Template>
                    </ListBox>
                    <ItemsControl DataContext="{Binding EyeColors}" Template="{StaticResource CCEyeColorGrid}" HorizontalAlignment="Center"/>

                    <!-- Hair (+ Beard if available) -->
                    <TextBlock Text="{Binding Source='haaecd709ga04eg4c33gb2a3gd5be989e5146', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelHeaderText}"/>
                    <Control Template="{DynamicResource Carousel}" Margin="0,20,0,0" DataContext="{Binding AppearanceHairstyles}"/>
                    <StackPanel Visibility="{Binding AppearanceBeards.ComboItems.Count, Converter={StaticResource CountToVisibilityConverter}}">
                        <TextBlock Text="{Binding Source='h5060d1edg2799g4388g9203gc42e380c68f8', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelHeaderText}"/>
                        <Control Template="{DynamicResource Carousel}" Margin="0,20,0,0" DataContext="{Binding AppearanceBeards}"/>
                    </StackPanel>
                    <TextBlock Text="{Binding Source='h6ed36c54g1a3dg4c46g9987gd5882613ae05', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelHeaderText}"/>
                    <ListBox ItemsSource="{Binding HairColorOptions}" ItemContainerStyle="{StaticResource AppearanceOptionStyle}" HorizontalAlignment="Center">
                        <ListBox.Template>
                            <ControlTemplate>
                                <ItemsPresenter/>
                            </ControlTemplate>
                        </ListBox.Template>
                    </ListBox>
                    <ItemsControl DataContext="{Binding HairColors}" Template="{StaticResource CCHairColorGrid}" HorizontalAlignment="Center"/>

                    <!-- Tattoos -->
                    <StackPanel Visibility="{Binding AppearanceTattoos.Materials.ComboItems.Count, Converter={StaticResource CountToVisibilityConverter}}">
                        <TextBlock Text="{Binding Source='h3f96b6b8gd682g4b90ga8fdge34ccb965bbd', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelHeaderText}"/>
                        <Control Template="{DynamicResource Carousel}" Margin="0,20,0,0" DataContext="{Binding AppearanceTattoos.Materials}" HorizontalAlignment="Center"/>
                        <StackPanel HorizontalAlignment="Center">
                            <ListBox ItemsSource="{Binding AppearanceTattoos.ColorOptions}" ItemContainerStyle="{StaticResource AppearanceOptionStyle}">
                                <ListBox.Template>
                                    <ControlTemplate>
                                        <ItemsPresenter/>
                                    </ControlTemplate>
                                </ListBox.Template>
                            </ListBox>
                            <ItemsControl DataContext="{Binding AppearanceTattoos}" Template="{StaticResource CCColorGrid}" ItemContainerStyle="{StaticResource ColorCellItemStyle}"/>
                            <StackPanel.Style>
                                <Style TargetType="StackPanel">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding AppearanceTattoos.EmptyMaterialSelected}" Value="True">
                                            <Setter Property="Opacity" Value="0.6"/>
                                            <Setter Property="IsHitTestVisible" Value="False"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </StackPanel.Style>
                        </StackPanel>
                    </StackPanel>

                    <!-- Makeup -->
                    <StackPanel Visibility="{Binding AppearanceMakeup.Materials.ComboItems.Count, Converter={StaticResource CountToVisibilityConverter}}">
                        <TextBlock Text="{Binding Source='hbd793d8fg4b19g4efdga071g112ba7af47dd', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelHeaderText}"/>
                        <Control Template="{DynamicResource Carousel}" Margin="0,20,0,0" DataContext="{Binding AppearanceMakeup.Materials}" HorizontalAlignment="Center"/>
                        <StackPanel HorizontalAlignment="Center">
                            <!-- MOD START - Removing tickbox as not required -->
							 <ListBox ItemContainerStyle="{StaticResource ModdedAppearanceOptionStyle}" ItemsSource="{Binding AppearanceMakeup.ColorOptions}">
                                <ListBox.Template>
                                    <ControlTemplate>
                                        <ItemsPresenter/>
                                    </ControlTemplate>
                                </ListBox.Template>
                            </ListBox>
							<!-- MOD END -->
                            <ItemsControl DataContext="{Binding AppearanceMakeup}" Template="{StaticResource CCColorGrid}" ItemContainerStyle="{StaticResource ColorCellItemStyle}"/>
                            <StackPanel.Style>
                                <Style TargetType="StackPanel">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding AppearanceMakeup.EmptyMaterialSelected}" Value="True">
                                            <Setter Property="Opacity" Value="0.6"/>
                                            <Setter Property="IsHitTestVisible" Value="False"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </StackPanel.Style>
                        </StackPanel>
                    </StackPanel>

                    <!-- Appearance Draconic Scales and Color -->
                    <StackPanel Visibility="{Binding AppearancePassive.ColorSwatch.Count, Converter={StaticResource CountToVisibilityConverter}}">
                        <TextBlock Text="{Binding Source='h0e1fded7g681ag4e5fgb0a2gc5928ab399a1', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelHeaderText}"/>
                        <Control Template="{DynamicResource Carousel}" Margin="0,20,0,0" DataContext="{Binding AppearancePassive.Materials}" HorizontalAlignment="Center"/>
                        <StackPanel HorizontalAlignment="Center">
                            <ListBox ItemsSource="{Binding AppearancePassive.ColorOptions}" ItemContainerStyle="{StaticResource AppearanceOptionStyle}">
                                <ListBox.Template>
                                    <ControlTemplate>
                                        <ItemsPresenter/>
                                    </ControlTemplate>
                                </ListBox.Template>
                            </ListBox>
                            <ItemsControl DataContext="{Binding AppearancePassive}" Template="{StaticResource CCColorGrid}" ItemContainerStyle="{StaticResource ColorCellItemStyle}"/>
                            <StackPanel.Style>
                                <Style TargetType="StackPanel">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding AppearancePassive.EmptyMaterialSelected}" Value="True">
                                            <Setter Property="Opacity" Value="0.6"/>
                                            <Setter Property="IsHitTestVisible" Value="False"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </StackPanel.Style>
                        </StackPanel>
                    </StackPanel>

                </StackPanel>
            </ControlTemplate>

            <ControlTemplate x:Key="AppearanceCharacterCreationTemplate">
                <ContentControl Template="{StaticResource CommonCharacterCreationPanel}" Padding="122,0,0,0">
                    <Control Template="{StaticResource AppearanceTemplate}" Margin="100,0,0,0"/>
                </ContentControl>
            </ControlTemplate>

            <ControlTemplate x:Key="ClassCharacterCreationTemplate">
                <ContentControl Template="{StaticResource CommonCharacterCreationPanel}" Padding="30,0,0,0">
                    <StackPanel Margin="0,0,0,100">

                        <TextBlock Text="{Binding Source='h32d1c528g0dfbg4751ga413g275e6d7ba4c3', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelTitleText}"/>

                        <StackPanel Margin="0,32,0,0">
                            <ContentControl Template="{StaticResource BoxedItemSelection}" DataContext="{Binding Classes}" Resources="{StaticResource SideBoxesTripleResources}">
                                <ContentControl.Style>
                                    <Style TargetType="ContentControl">
                                        <Style.Resources>
                                            <System:String x:Key="SoundEventHover">UI_HUD_CC_SelectClass_Hover</System:String>
                                            <System:String x:Key="SoundEventPress">UI_HUD_CC_SelectClass_Press</System:String>
                                        </Style.Resources>
                                    </Style>
                                </ContentControl.Style>
                            </ContentControl>

                            <Grid Width="1000" HorizontalAlignment="Center" Margin="0,32,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Image Grid.Row="1" Grid.Column="0" DataContext="{Binding DummyCharacter.Stats.ClassList[0]}" Style="{DynamicResource ClassIconStyle}"/>

                                <TextBlock Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" Text="{Binding DummyCharacter.Stats.ClassList[0].ClassDisplayName}" Style="{StaticResource PanelTitleText}" HorizontalAlignment="Center" Margin="0,0,0,-80"/>
                                <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding DummyCharacter.Stats.ClassList[0].ClassDescription}" Style="{StaticResource PanelTitleInfoText}" TextAlignment="Left" VerticalAlignment="Top" Margin="0,80,0,0" TextWrapping="Wrap" Width="700"/>
                            </Grid>
							
							<!-- MOD START - God available for all classes by moving -->
                            
                            <StackPanel Visibility="{Binding Gods.ComboItems.Count, Converter={StaticResource CountToVisibleConverter}}">
                                <TextBlock Text="{Binding Source='hd146e00aga3a6g4e42g8068g9271c358dc5b', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelHeaderText}"/>
                                <ContentControl Template="{StaticResource ValidationFailedHighlighter}" Tag="{Binding GodInvalid}" Margin="0,20,0,0">
                                    <Control Template="{DynamicResource Carousel}" DataContext="{Binding Gods}">
                                        <Control.Resources>
                                            <System:String x:Key="CarouselButtonSoundEvent">UI_HUD_CC_Class_Passive</System:String>
                                        </Control.Resources>
                                    </Control>
                                </ContentControl>
                                <TextBlock Text="{Binding DummyCharacter.Stats.GodDescription}" Style="{StaticResource PanelInfoText}" Margin="0,20,0,0"/>
                            </StackPanel>
                            
                            <!-- MOD END -->

							<Control x:Name="classSpells" Visibility="Collapsed" Template="{StaticResource SpellBoxesTemplate}" DataContext="{Binding ClassProgressionDetails}" Margin="0,20,0,0"/>
							<Control x:Name="classSpellPreparation" Visibility="Collapsed" Template="{StaticResource SpellPreparationTemplate}" Margin="0,0,0,10"/>

                        </StackPanel>


                        <StackPanel Visibility="{Binding Subclasses.ComboItems.Count, Converter={StaticResource CountToVisibilityConverter}}">
                            <TextBlock Text="{Binding Source='h1e67bc9cg0f53g4218g8ce8geb6a6636f141', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelHeaderText}"/>

                            <Control Template="{DynamicResource Carousel}" Margin="0,20,0,0" DataContext="{Binding Subclasses}">
                                <Control.Resources>
                                    <System:String x:Key="CarouselButtonSoundEvent">UI_HUD_CC_Class_Passive</System:String>
                                </Control.Resources>
                            </Control>

                            <TextBlock Text="{Binding DummyCharacter.Stats.ClassList[0].SubclassDescription}" Style="{StaticResource PanelInfoText}" Margin="0,20,0,0"/>

                            <!-- MOD START - Original God Position -->
                            <!--<StackPanel Visibility="{Binding Gods.ComboItems.Count, Converter={StaticResource CountToVisibleConverter}}">
                                <TextBlock Text="{Binding Source='hd146e00aga3a6g4e42g8068g9271c358dc5b', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelHeaderText}"/>
                                <ContentControl Template="{StaticResource ValidationFailedHighlighter}" Tag="{Binding GodInvalid}" Margin="0,20,0,0">
                                    <Control Template="{DynamicResource Carousel}" DataContext="{Binding Gods}">
                                        <Control.Resources>
                                            <System:String x:Key="CarouselButtonSoundEvent">UI_HUD_CC_Class_Passive</System:String>
                                        </Control.Resources>
                                    </Control>
                                </ContentControl>
                                <TextBlock Text="{Binding DummyCharacter.Stats.GodDescription}" Style="{StaticResource PanelInfoText}" Margin="0,20,0,0"/>
                            </StackPanel> -->
                            <!-- MOD END -->

                            <Control Template="{StaticResource SpellBoxesTemplate}" DataContext="{Binding ClassProgressionDetails}" Margin="0,20,0,0"/>
                            <Control Template="{StaticResource SpellPreparationTemplate}" Margin="0,0,0,30"/>

                        </StackPanel>

                        <Control Template="{StaticResource ClassPassivesTemplate}" DataContext="{Binding ClassPassives}"/>
                        <Control Template="{StaticResource ClassPassivesTemplate}" DataContext="{Binding SubClassPassives}"/>
                            
                        <!-- Appearance Draconic Scales and Color -->
                        <StackPanel Visibility="{Binding AppearancePassive.ColorSwatch.Count, Converter={StaticResource CountToVisibilityConverter}}">
                            <TextBlock Text="{Binding Source='h261cce55g1d1eg4c09g9675ge5c1be13e820', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelHeaderText}"/>
                            <Control Template="{DynamicResource Carousel}" Margin="0,20,0,0" DataContext="{Binding AppearancePassive.Materials}" HorizontalAlignment="Center"/>
                            <StackPanel HorizontalAlignment="Center">
                                <ListBox ItemsSource="{Binding AppearancePassive.ColorOptions}" ItemContainerStyle="{StaticResource AppearanceOptionStyle}">
                                    <ListBox.Template>
                                        <ControlTemplate>
                                            <ItemsPresenter/>
                                        </ControlTemplate>
                                    </ListBox.Template>
                                </ListBox>
                                <ItemsControl DataContext="{Binding AppearancePassive}" Template="{StaticResource CCColorGrid}" ItemContainerStyle="{StaticResource ColorCellItemStyle}"/>
                                <StackPanel.Style>
                                    <Style TargetType="StackPanel">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding AppearancePassive.EmptyMaterialSelected}" Value="True">
                                                <Setter Property="Opacity" Value="0.6"/>
                                                <Setter Property="IsHitTestVisible" Value="False"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </StackPanel.Style>
                            </StackPanel>
                        </StackPanel>

                        <ItemsControl ItemTemplate="{DynamicResource ProgressionFeaturesTemplate}" ItemsSource="{Binding PassiveFeatures}" HorizontalAlignment="Center" Visibility="{Binding PassiveFeatures.Count, Converter={StaticResource CountToVisibilityConverter}}"/>

                        <TextBlock Text="{Binding Source='ha8e068ccg5974g4e83g9070gefe58efc012f', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelHeaderText}"/>
                        <Grid x:Name="HPIncHolder" HorizontalAlignment="Center" Margin="0,16,0,0" DataContext="{Binding DummyCharacter.Stats.ClassList[0].MaxHpIncrease}" ToolTipService.Placement="Left">
                            <TextBlock Text="{Binding Name}" Foreground="{DynamicResource LS_PrimaryColor}" TextWrapping="Wrap" Margin="0,20,0,0"/>
                            <Grid.ToolTip>
                                <ls:LSTooltip Template="{StaticResource BaseTooltipTemplate}" Content="{Binding Path=DataContext, ElementName=HPIncHolder}">
                                    <ls:LSTooltip.ContentTemplate>
                                        <DataTemplate>
                                            <StackPanel >
                                                <TextBlock Style="{StaticResource TooltipTitleStyle}" Text="{Binding Name}"/>
                                                <TextBlock Style="{StaticResource TooltipCtxTransStringDescriptionStyle}">
                                            <b:Interaction.Behaviors>
                                                <ls:CtxTransStringRunGeneratorBehavior Source="{Binding Description}" ParamRunStyle="{StaticResource TooltipUnitParamRun}"/>
                                            </b:Interaction.Behaviors>
                                                </TextBlock>
                                            </StackPanel>
                                        </DataTemplate>
                                    </ls:LSTooltip.ContentTemplate>
                                    
                                </ls:LSTooltip>
                            </Grid.ToolTip>
                        </Grid>

                        <ContentControl Template="{StaticResource CharacterClassFeatures}" Visibility="{Binding ClassProgressionDetails.IsEmpty, Converter={StaticResource BoolToHiddenConverter}}"/>

                    </StackPanel>
                </ContentControl>

                <ControlTemplate.Triggers>
                    <DataTrigger Binding="{Binding Subclasses.ComboItems.Count}" Value="0">
                        <Setter TargetName="classSpells" Property="Visibility" Value="Visible"/>
                        <Setter TargetName="classSpellPreparation" Property="Visibility" Value="Visible"/>
                    </DataTrigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>

            <ControlTemplate x:Key="SkillsCharacterCreationTemplate">
                <ContentControl Template="{StaticResource CommonCharacterCreationPanel}" Padding="46,0,0,0">
                    <StackPanel>

                        <TextBlock Text="{Binding Source='h05d3dcdfgd34fg4ca1gb294gafd882b078d2', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelTitleText}"/>

                        <StackPanel Margin="0,0,0,50">

                            <TextBlock ls:TextBlockFormatter.SourceText="{Binding Source='hda608d66g306eg4739g8ea2g974918945bb8', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelTitleInfoText}" Margin="0,12,0,0"/>

                            <Grid x:Name="ProficiencyBonus" HorizontalAlignment="Center" DataContext="{Binding DummyCharacter.Stats.ProficiencyBonus}" Margin="0,20,0,0" >
                                <Grid.ToolTip>
                                    <ls:LSTooltip IsHitTestVisible="False" Content="{Binding Path=DataContext ,ElementName=ProficiencyBonus}"/>
                                </Grid.ToolTip>
                                <Image Source="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/decorated_box.png" Stretch="None"/>
                                <TextBlock Foreground="{DynamicResource LS_PrimaryColor}" HorizontalAlignment="Center" VerticalAlignment="Center">
                                    <Run Text="{Binding Name}"/>
                                    <Run Text="{Binding Value, StringFormat={}{0: +#; -#; -}}"/>
                                </TextBlock>
                            </Grid>

                            <StackPanel Background="Transparent" Visibility="{Binding BackgroundFeatures.Count, Converter={StaticResource CountToVisibilityConverter}}"  Margin="0,30,0,0">
                                <TextBlock Text="{Binding Source='hb4f4053bg6a73g4eb6gb641g0b835bc3fecf', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource SkillHeaderText}" HorizontalAlignment="Center" Foreground="{DynamicResource LS_PrimaryColor}"/>
                                <ItemsControl ItemsSource="{Binding DummyCharacter.Stats.ProficientSkills}" Margin="128,10,0,0">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Grid x:Name="skillItem" Visibility="Collapsed" Margin="0,8,0,0" Background="Transparent">
                                                <Image Source="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/checkMark_skills_selectedBefore.png" Stretch="None" HorizontalAlignment="Left"/>
                                                <TextBlock Text="{Binding Name}" Foreground="{DynamicResource LS_InactivePanelFontColor}" ToolTip="{StaticResource ManagedTooltip}" ToolTipService.Placement="Left" HorizontalAlignment="Left" Margin="44,0,0,0"/>
                                                <TextBlock Text="{Binding SkillSourceLabel}" Foreground="{DynamicResource LS_InactivePanelFontColor}" HorizontalAlignment="Right" Margin="0,0,40,0"/>
                                            </Grid>
                                            <DataTemplate.Triggers>
                                                <DataTrigger Binding="{Binding SkillSource}" Value="Background">
                                                    <Setter TargetName="skillItem" Property="Visibility" Value="Visible"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding SkillSource}" Value="Race">
                                                    <Setter TargetName="skillItem" Property="Visibility" Value="Visible"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding SkillSource}" Value="Class">
                                                    <Setter TargetName="skillItem" Property="Visibility" Value="Visible"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding SkillSource}" Value="Passive">
                                                    <Setter TargetName="skillItem" Property="Visibility" Value="Visible"/>
                                                </DataTrigger>                                                
                                            </DataTemplate.Triggers>                                            
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>

                            <ContentControl Template="{DynamicResource SkillSelectionBox}" DataContext="{Binding RaceSkills}" Margin="0,10,0,0">
                                <ContentControl.Resources>
                                    <ControlTemplate x:Key="Title">
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                            <Image Source="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_race.png" Stretch="None" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                            <TextBlock x:Name="txt" Style="{StaticResource SkillHeaderText}" Foreground="{DynamicResource LS_PrimaryColor}" VerticalAlignment="Center">
                                                <Run Text="{Binding Source='he5394f55gf6c5g4781g921fg87d4ef5cb689', Converter={StaticResource TranslatedStringConverter}}"/>
                                                <Run Text="{Binding SelectedSkillCount, StringFormat=' ({0}'}"/>
                                                <Run Text="{Binding MaxSelectedSkillCount, StringFormat='/{0})'}"/>
                                            </TextBlock>
                                        </StackPanel>
                                        <ControlTemplate.Triggers>
                                            <DataTrigger Binding="{Binding IsComplete}" Value="False">
                                                <Setter TargetName="txt" Property="Foreground" Value="{DynamicResource LS_SecondaryColor}"/>
                                            </DataTrigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </ContentControl.Resources>
                            </ContentControl>

                            <ContentControl Template="{DynamicResource SkillSelectionBox}" DataContext="{Binding ClassSkills}" Margin="0,10,0,0">
                                <ContentControl.Resources>
                                    <ControlTemplate x:Key="Title">
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                            <Image Source="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_class.png" Stretch="None" VerticalAlignment="Center" Margin="0,-10,10,0"/>
                                            <TextBlock x:Name="txt" Style="{StaticResource SkillHeaderText}" Foreground="{DynamicResource LS_PrimaryColor}" VerticalAlignment="Center">
                                                <Run Text="{Binding Source='h5cab4ab6g7b46g46cegb82fg3ea721099318', Converter={StaticResource TranslatedStringConverter}}"/>
                                                <Run Text="{Binding SelectedSkillCount, StringFormat=' ({0}'}"/>
                                                <Run Text="{Binding MaxSelectedSkillCount, StringFormat='/{0})'}"/>
                                            </TextBlock>
                                        </StackPanel>
                                        <ControlTemplate.Triggers>
                                            <DataTrigger Binding="{Binding IsComplete}" Value="False">
                                                <Setter TargetName="txt" Property="Foreground" Value="{DynamicResource LS_SecondaryColor}"/>
                                            </DataTrigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </ContentControl.Resources>
                            </ContentControl>
							
							<ContentControl Template="{DynamicResource SkillSelectionBox}" DataContext="{Binding ExpertiseSkills}" Margin="0,10,0,0">
								<ContentControl.Resources>
									<ControlTemplate x:Key="Title">
										<StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
											<Image Source="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_expertise.png" Stretch="None" VerticalAlignment="Center" Margin="0,-10,10,0"/>
											<TextBlock x:Name="txt" Style="{StaticResource SkillHeaderText}" Foreground="{DynamicResource LS_PrimaryColor}" VerticalAlignment="Center">
												<Run Text="{Binding Source='h601ff4c6g67b8g4f32gaaf7g8b29d6daa426', Converter={StaticResource TranslatedStringConverter}}"/>
												<Run Text="{Binding SelectedSkillCount, StringFormat=' ({0}'}"/>
												<Run Text="{Binding MaxSelectedSkillCount, StringFormat='/{0})'}"/>
											</TextBlock>
										</StackPanel>
										<ControlTemplate.Triggers>
											<DataTrigger Binding="{Binding IsComplete}" Value="False">
												<Setter TargetName="txt" Property="Foreground" Value="{DynamicResource LS_SecondaryColor}"/>
											</DataTrigger>
										</ControlTemplate.Triggers>
									</ControlTemplate>
								</ContentControl.Resources>
							</ContentControl>

                            <StackPanel HorizontalAlignment="Stretch" Margin="0,20,0,20" Visibility="{Binding UnavailableSkills.Count, Converter={StaticResource CountToVisibilityConverter}}">
                                <TextBlock Text="{Binding Source='h5df90331gdf02g44d5gae28g409b309f633f', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource SkillHeaderText}" Foreground="{DynamicResource LS_PrimaryColor}" HorizontalAlignment="Center"/>
                                <ItemsControl ItemsSource="{Binding UnavailableSkills}" Margin="124,10,0,0">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal" Margin="0,8,0,0" Background="Transparent" Visibility="{Binding Enabled, Converter={StaticResource BoolToVisibleConverter}}">
                                                <Image Source="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/checkMark_skills_unavailable.png" Stretch="None" VerticalAlignment="Top" Margin="0,12,0,0"/>
                                                <TextBlock Text="{Binding Name}" Foreground="{DynamicResource LS_InactivePanelFontColor}" ToolTip="{StaticResource ManagedTooltip}" ToolTipService.Placement="Left" Margin="26,0,0,0"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>

                        </StackPanel>
                    </StackPanel>
                </ContentControl>
            </ControlTemplate>

            <ControlTemplate x:Key="AbilitiesCharacterCreationTemplate">
                <ContentControl Template="{StaticResource CommonCharacterCreationPanel}" Padding="38,0,0,0">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="100,0,-100,0">
                            <TextBlock Text="{Binding Source='h711b5e8bgb67bg43f7gac08g36b2e2466acd', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelTitleText}" Margin="0,0,100,0"/>

                            <ContentControl Template="{StaticResource ValidationFailedHighlighter}" Tag="{Binding AbilitiesInvalid}" HorizontalAlignment="Center">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock FontSize="{DynamicResource BigFontSize}" Foreground="{DynamicResource LS_PrimaryColor}">
                                        <Run Text="{Binding UnusedAbilityPoints}"/><Run Text="{Binding TotalAbilityPoints, StringFormat='/{0}'}"/>
                                    </TextBlock>
                                </StackPanel>
                            </ContentControl>
                        </StackPanel>

                        <!-- The DataContext Binding to VMCharacter is for Tooltips FindPlayerAndCharacter -->
                        <ItemsControl DataContext="{Binding DummyCharacter}" ItemsSource="{Binding Stats.Abilities}" Margin="0,4,0,0">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <ContentControl Template="{StaticResource AbilityAdjusterTemplate}"/>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                            <ItemsControl.ItemContainerStyle>
                                <Style TargetType="ContentPresenter">
                                    <Setter Property="Margin" Value="0,0,0,-50"/>
                                </Style>
                            </ItemsControl.ItemContainerStyle>
                        </ItemsControl>

                        <Grid HorizontalAlignment="Center" x:Name="ProficiencyBonus" DataContext="{Binding DummyCharacter.Stats.ProficiencyBonus}" Margin="0,32,0,0">
                            <Grid.ToolTip>
                                <ls:LSTooltip IsHitTestVisible="False" Content="{Binding Path=DataContext ,ElementName=ProficiencyBonus}"/>
                            </Grid.ToolTip>
                            <Image Source="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/decorated_box.png" Stretch="None"/>
                            <TextBlock Foreground="{DynamicResource LS_PrimaryColor}" HorizontalAlignment="Center" VerticalAlignment="Center">
                            <Run Text="{Binding Name}"/>
                            <Run Text="{Binding Value, StringFormat={}{0: +#; -#; -}}"/>
                            </TextBlock>
                        </Grid>

                        <ls:LSButton Content="{Binding Source='h44d84d6fg14d8g4606gb563gf458f155defa', Converter={StaticResource TranslatedStringConverter}}" Command="{Binding DataContext.UseRecommendedAbilities, RelativeSource={RelativeSource AncestorType={x:Type ls:UIWidget}}}" IsEnabled="{Binding CanUseRecommendedAbilities}" Style="{StaticResource SmallButtonStyle}" Margin="0,40,0,20" SoundID="UI_HUD_CC_Recommended"/>
                    </StackPanel>
                </ContentControl>
            </ControlTemplate>

            <ControlTemplate x:Key="CompanionCharacterCreationTemplate">
                <ContentControl Template="{StaticResource CommonCharacterCreationPanel}" Padding="34,0,0,0">
                    <StackPanel>
                        <TextBlock Text="{Binding Source='h0606bec2g5227g499ag8f4bg9ab2589ccded', Converter={StaticResource TranslatedStringConverter}}" Style="{DynamicResource PanelTitleText}" VerticalAlignment="Bottom"/>
                        <TextBlock Text="{Binding Source='h6020727bge0e3g4de7gaf3ag469c3b32b3d2', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelHeaderText}"/>
                        <ContentControl Template="{StaticResource BoxedItemSelection}" DataContext="{Binding Races}" Margin="0,32,0,0" Resources="{StaticResource SideBoxesTripleResources}">
                            <ContentControl.Style>
                                <Style TargetType="ContentControl">
                                    <Style.Resources>
                                        <System:String x:Key="SoundEventHover">UI_HUD_CC_SelectRace_Hover</System:String>
                                        <System:String x:Key="SoundEventPress">UI_HUD_CC_SelectRace_Press</System:String>
                                    </Style.Resources>
                                </Style>
                            </ContentControl.Style>
                        </ContentControl>

                        <StackPanel Visibility="{Binding Subraces.ComboItems.Count, Converter={StaticResource CountToVisibilityConverter}}" Margin="0,32,0,0">
                            <TextBlock Text="{Binding Source='h29d1d637g94bbg4f11g9bdfgbe0042b60e40', Converter={StaticResource TranslatedStringConverter}}" Style="{StaticResource PanelHeaderText}"/>
                            <Control Template="{DynamicResource Carousel}" Margin="0,20,0,0" DataContext="{Binding Subraces}"/>
                        </StackPanel>

                        <TextBlock Text="{Binding DummyCharacter.Stats.RaceDescription}" Style="{StaticResource PanelTitleInfoText}" Margin="0,32,0,0"/>

                        <Control Template="{StaticResource SpellBoxesTemplate}" DataContext="{Binding RaceProgressionDetails}"/>

                        <Control Template="{StaticResource AppearanceTemplate}"/>
                    </StackPanel>
                </ContentControl>
            </ControlTemplate>

        </ResourceDictionary>
    </ls:UIWidget.Resources>


    <Grid  ls:TooltipExtender.Owner="{Binding DummyCharacter}">
        <ls:LSButton Command="{Binding ExitCharacterCreation}" SoundID="UI_HUD_CC_Accept" Style="{StaticResource CloseButton}" HorizontalAlignment="Right" VerticalAlignment="Top" ToolTipService.Placement="Bottom" ToolTipService.VerticalOffset="-20">
            <ls:LSButton.ToolTip>
                <ls:LSTooltip Content="{Binding Source='hb8f17a12gded0g4ed7g8897gfa821f15093c', Converter={StaticResource TranslatedStringConverter}}"/>
            </ls:LSButton.ToolTip>
        </ls:LSButton>
        <Control Template="{StaticResource CharacterCreationStepButtons}" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="-224,10,224,0"/>

        <ls:LSButton Command="{Binding PrevCharacterCreationStep}" SoundID="UI_HUD_CC_Accept" Template="{DynamicResource NavButton}" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="100,56,0,0">
            <ls:LSButton.Resources>
                <BitmapImage x:Key="Icon" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_back_d.png"/>
                <BitmapImage x:Key="IconHighlight" UriSource="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/ico_back_h.png"/>
                <ImageSource x:Key="ButtonNormal">pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/topNav_back_d.png</ImageSource>
                <ImageSource x:Key="ButtonHighlight">pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/topNav_back_h.png</ImageSource>
                <ImageSource x:Key="ButtonPressed">pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/topNav_back_p.png</ImageSource>
                <ImageSource x:Key="ButtonDisabled">pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/topNav_back_disabled.png</ImageSource>
            </ls:LSButton.Resources>
            <ls:LSButton.Style>
                <Style TargetType="ls:LSButton">
                    <Setter Property="Visibility" Value="Collapsed"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding CharacterCreationStep}" Value="Companion">
                            <Setter Property="Visibility" Value="Visible"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </ls:LSButton.Style>
        </ls:LSButton>

        <Grid HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="30,0,0,0">
            <Control Template="{StaticResource CharacterCardTemplate}">
                <Control.Style>
                    <Style TargetType="Control">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding CharacterCreationStep}" Value="Companion">
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Control.Style>
            </Control>
        </Grid>

        <Grid HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="-600,0,0,0">

            <Image Source="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/buttonPane_bg_center.png" Stretch="None"/>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="-20,0,0,0">
                <StackPanel.Style>
                    <Style TargetType="StackPanel">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding CharacterCreationStep}" Value="Companion">
                                <DataTrigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <BooleanAnimationUsingKeyFrames Storyboard.TargetProperty="IsEnabled">
                                                <DiscreteBooleanKeyFrame KeyTime="00:00:00" Value="False" />
                                                <DiscreteBooleanKeyFrame KeyTime="00:00:01" Value="True" />
                                            </BooleanAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.EnterActions>
                            </DataTrigger>
                            <MultiDataTrigger>
                                <MultiDataTrigger.Conditions>
                                    <Condition Binding="{Binding ElementName=multiplayer, Path=Visibility}" Value="Hidden"/>
                                    <Condition Binding="{Binding CharacterCreationStep}" Value="Finish"/>
                                </MultiDataTrigger.Conditions>
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </MultiDataTrigger>
                            <MultiDataTrigger>
                                <MultiDataTrigger.Conditions>
                                    <Condition Binding="{Binding ElementName=multiplayer, Path=Visibility}" Value="Visible"/>
                                    <Condition Binding="{Binding CharacterCreationStep}" Value="Finish"/>
                                </MultiDataTrigger.Conditions>
                                <MultiDataTrigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)">
                                                <DiscreteObjectKeyFrame KeyTime="00:00:00" Value="{x:Static Visibility.Hidden}"/>
                                                <DiscreteObjectKeyFrame KeyTime="00:00:01" Value="{x:Static Visibility.Visible}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </MultiDataTrigger.EnterActions>
                            </MultiDataTrigger>
                        </Style.Triggers>
                    </Style>
                </StackPanel.Style>

                <Image VerticalAlignment="Center" Source="pack://application:,,,/GustavNoesisGUI;component/Assets/Shared/BigBtn_sideDecor.png" Stretch="None" Panel.ZIndex="0" Margin="0,0,0,-8"/>

                <ls:LSButton  x:Name="ventureForthBtn" VerticalAlignment="Center" Margin="-90,0,-90,0" HorizontalAlignment="Center" Panel.ZIndex="1">
                    <ls:LSButton.Style>
                        <Style TargetType="ls:LSButton" BasedOn="{StaticResource BigButtonStyle}">
                            <Setter Property="IsEnabled" Value="{Binding IsCharacterComplete}"/>
                            <Setter Property="Content" Value="{Binding Source='h06b74424gf3bdg4b6cgbe63g84b32198e162', Converter={StaticResource TranslatedStringConverter}}"/>
                            <Setter Property="Command" Value="{Binding FinishCreating}"/>
                            <Setter Property="SoundID" Value="UI_HUD_CC_VentureForth_MC"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding CharacterCreationStep}" Value="Companion">
                                    <Setter Property="SoundID" Value="UI_HUD_CC_VentureForth_Daisy"/>
                                </DataTrigger>

                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding Data.Players.Count, Converter={StaticResource GreaterThanConverter}, ConverterParameter=1}" Value="True"/>
                                        <Condition Binding="{Binding CurrentPlayer.Ready}" Value="True"/>
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="Content" Value="{Binding Source='ha76ad417g8e0fg4767g9af3gbfd82ca27cfb', Converter={StaticResource TranslatedStringConverter}}"/>                                                                       
                                </MultiDataTrigger>

                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding Data.Players.Count, Converter={StaticResource GreaterThanConverter}, ConverterParameter=1}" Value="True"/>
                                        <Condition Binding="{Binding CurrentPlayer.Ready}" Value="True"/>
                                        <Condition Binding="{Binding ElementName=ventureForthBtn, Path=IsMouseOver}" Value="True"/>
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="Content" Value="{Binding Source='hccfb0467gf162g4e79g9319g175b2902128b', Converter={StaticResource TranslatedStringConverter}}"/>
                                    <Setter Property="Command" Value="{Binding CancelReady}"/>
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </ls:LSButton.Style>
                </ls:LSButton>

                <Image VerticalAlignment="Center" Source="pack://application:,,,/GustavNoesisGUI;component/Assets/Shared/BigBtn_sideDecor.png" Stretch="None" Panel.ZIndex="0" Margin="0,0,0,-8">
                    <Image.RenderTransform>
                        <ScaleTransform ScaleX="-1" CenterX="80"/>
                    </Image.RenderTransform>
                </Image>

            </StackPanel>
        </Grid>

        <Grid HorizontalAlignment="Right" VerticalAlignment="Bottom">
            <Image Source="pack://application:,,,/GustavNoesisGUI;component/Assets/CharacterCreation/contentPane.png" Stretch="None"/>
            <Control Height="1920" MaxHeight="1920" VerticalAlignment="Bottom">
                <Control.Style>
                    <Style TargetType="Control"  BasedOn="{StaticResource {x:Type Control}}">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding CharacterCreationStep}" Value="Origin">
                                <Setter Property="Template" Value="{StaticResource OriginCharacterCreationTemplate}"/>
                                <Setter Property="Margin" Value="0,0,-200,0"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding CharacterCreationStep}" Value="Race">
                                <Setter Property="Template" Value="{StaticResource RaceCharacterCreationTemplate}"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding CharacterCreationStep}" Value="Appearance">
                                <Setter Property="Template" Value="{StaticResource AppearanceCharacterCreationTemplate}"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding CharacterCreationStep}" Value="Class">
                                <Setter Property="Template" Value="{StaticResource ClassCharacterCreationTemplate}"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding CharacterCreationStep}" Value="Skills">
                                <Setter Property="Template" Value="{StaticResource SkillsCharacterCreationTemplate}"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding CharacterCreationStep}" Value="Abilities">
                                <Setter Property="Template" Value="{StaticResource AbilitiesCharacterCreationTemplate}"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding CharacterCreationStep}" Value="Companion">
                                <Setter Property="Template" Value="{StaticResource CompanionCharacterCreationTemplate}"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Control.Style>
            </Control>
            <Grid.Style>
                <Style TargetType="Grid">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding CharacterCreationStep}" Value="Finish">
                            <Setter Property="Visibility" Value="Collapsed"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Grid.Style>
        </Grid>

        <ContentControl x:Name="multiplayer" Template="{StaticResource MultiplayerPanelTemplate}" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="20,0,0,20"/>

    </Grid>

</ls:UIWidget>